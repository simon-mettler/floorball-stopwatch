<!DOCTYPE html> 
<html lang="en"> 

	<head> 
		<title> JavaScript Stop Watch </title> 
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

 		<link rel="stylesheet" type="text/css" href="style/style.css">

		<script src="js/stopwatch.js"></script> 
		<script src="js/hotkeys.js"></script> 

	</head> 

	<body> 

		<div class="wrap">

			<!-- <a href="data:application/octet-stream;charset=utf-16le;base64,//5mAG8AbwAgAGIAYQByAAoA">text file</a><br> -->

			<div class="player">
				<span class="key">q</span> <span class="name">Player Q</span>
				<span class="watchdisplay" id="wd-q">00:00:00</span><div id="blink-q"></div>
				<span class="counter" id="c-q">-</span> 
			</div>

			<div class="player">
				<span class="key">w</span> <span class="name">Player W</span>
				<span class="watchdisplay" id="wd-w">00:00:00</span><div id="blink-w"></div>
				<span class="counter" id="c-w">-</span> 
			</div>
			
			<div class="player">
				<span class="key">e</span> <span class="name">Player E</span>
				<span class="watchdisplay" id="wd-e">00:00:00</span><div id="blink-e"></div>
				<span class="counter" id="c-e">-</span> 
			</div>

			<div class="player">
				<span class="key">r</span> <span class="name">Player R</span>
				<span class="watchdisplay" id="wd-r">00:00:00</span><div id="blink-r"></div>
				<span class="counter" id="c-r">-</span> 
			</div>

			<div class="player">
				<span class="key">t</span> <span class="name">Player T</span>
				<span class="watchdisplay" id="wd-t">00:00:00</span><div id="blink-t"></div>
				<span class="counter" id="c-t">-</span> 
			</div>

			<div class="line-control">
				Start
			</div>

			<div class="divider"></div>

			<div class="player">
				<span class="key">y</span> <span class="name">Player Y</span>
				<span class="watchdisplay" id="wd-y">00:00:00</span><div id="blink-y"></div>
				<span class="counter" id="c-y">-</span> 
			</div>

			<div class="player">
				<span class="key">u</span> <span class="name">Player U</span>
				<span class="watchdisplay" id="wd-u">00:00:00</span><div id="blink-u"></div>
				<span class="counter" id="c-u">-</span> 
			</div>
			
			<div class="player">
				<span class="key">i</span> <span class="name">Player I</span>
				<span class="watchdisplay" id="wd-i">00:00:00</span><div id="blink-i"></div>
				<span class="counter" id="c-i">-</span> 
			</div>

			<div class="player">
				<span class="key">o</span> <span class="name">Player O</span>
				<span class="watchdisplay" id="wd-o">00:00:00</span><div id="blink-o"></div>
				<span class="counter" id="c-o">-</span> 
			</div>

			<div class="player">
				<span class="key">p</span> <span class="name">Player P</span>
				<span class="watchdisplay" id="wd-p">00:00:00</span><div id="blink-p"></div>
				<span class="counter" id="c-p">-</span> 
			</div>

			<div class="divider"></div>

			<div class="player">
				<span class="key">a</span> <span class="name">Player A</span>
				<span class="watchdisplay" id="wd-a">00:00:00</span><div id="blink-a"></div>
				<span class="counter" id="c-a">-</span> 
			</div>

			<div class="player">
				<span class="key">s</span> <span class="name">Player S</span>
				<span class="watchdisplay" id="wd-s">00:00:00</span><div id="blink-s"></div>
				<span class="counter" id="c-s">-</span> 
			</div>
			
			<div class="player">
				<span class="key">d</span> <span class="name">Player D</span>
				<span class="watchdisplay" id="wd-d">00:00:00</span><div id="blink-d"></div>
				<span class="counter" id="c-d">-</span> 
			</div>

			<div class="player">
				<span class="key">f</span> <span class="name">Player F</span>
				<span class="watchdisplay" id="wd-f">00:00:00</span><div id="blink-f"></div>
				<span class="counter" id="c-f">-</span> 
			</div>

			<div class="player">
				<span class="key">g</span> <span class="name">Player G</span>
				<span class="watchdisplay" id="wd-g">00:00:00</span><div id="blink-g"></div>
				<span class="counter" id="c-g">-</span> 
			</div>

			<div class="divider"></div>

			<div class="player">
				<span class="key">z</span> <span class="name">Player Z</span>
				<span class="watchdisplay" id="wd-z">00:00:00</span><div id="blink-z"></div>
				<span class="counter" id="c-z">-</span> 
			</div>

			<div class="player">
				<span class="key">x</span> <span class="name">Player X</span>
				<span class="watchdisplay" id="wd-x">00:00:00</span><div id="blink-x"></div>
				<span class="counter" id="c-x">-</span> 
			</div>
			
			<div class="player">
				<span class="key">c</span> <span class="name">Player C</span>
				<span class="watchdisplay" id="wd-c">00:00:00</span><div id="blink-c"></div>
				<span class="counter" id="c-c">-</span> 
			</div>

			<div class="player">
				<span class="key">v</span> <span class="name">Player V</span>
				<span class="watchdisplay" id="wd-v">00:00:00</span><div id="blink-v"></div>
				<span class="counter" id="c-v">-</span> 
			</div>

			<div class="player">
				<span class="key">b</span> <span class="name">Player B</span>
				<span class="watchdisplay" id="wd-b">00:00:00</span><div id="blink-b"></div>
				<span class="counter" id="c-b">-</span> 
			</div>
			
			<div class="divider"></div>

		</div><!-- .wrap --> 

 
			<span id="break-key" class="key">h</span> 
			<div id="break-button" class="button">
				<span class="button-text" id="">Break</span>
			</div>

		<script>// <![CDATA[

			/*
			 * Author: Simon Mettler
			 * https://github.com/simon-mettler
			 */

			// Object that stores counters, toggles, ...
			let watchParts = {
				lineToggle: {
					h: 0,
					j: 0,
					k: 0,
					l: 0
				},
				watchToggle: {
					q: 0,	w: 0, e: 0, r: 0, t: 0,
					y: 0,	u: 0, i: 0, o: 0, p: 0,
					a: 0,	s: 0, d: 0, f: 0, g: 0,
					z: 0,	x: 0, c: 0, v: 0, b: 0,
				},
				watchCounter: {
					q: 0,	w: 0, e: 0, r: 0, t: 0,
					y: 0,	u: 0, i: 0, o: 0, p: 0,
					a: 0,	s: 0, d: 0, f: 0, g: 0,
					z: 0,	x: 0, c: 0, v: 0, b: 0,
				}
			};


			function startWatch(watch, hotkey) {

				if(watchParts.watchToggle[hotkey] == 0) {
					event.preventDefault();
					watch.start();
					watchParts.watchToggle[hotkey] = 1;
					document.getElementById('blink-' + hotkey).classList.add("blink");
				}

			}
		
			function stopWatch(watch, hotkey) {

				if(watchParts.watchToggle[hotkey] == 1) {
					event.preventDefault();
					watch.stop();
					watchParts.watchToggle[hotkey] = 0;
					watchParts.watchCounter[hotkey] += 1;
					document.getElementById('c-' + hotkey).innerHTML = watchParts.watchCounter[hotkey];
					document.getElementById('blink-' + hotkey).classList.remove("blink");
				}

			}


			hotkeys('h', function(event, handler){

				if (watchParts.lineToggle.h == 0) {
					watchParts.lineToggle.h = 1;
					startWatch(watchQ, 'q');
					startWatch(watchW, 'w');
					startWatch(watchE, 'e');
					startWatch(watchR, 'r');
					startWatch(watchT, 't');
				} else {
					watchParts.lineToggle.h = 0;
					stopWatch(watchQ, 'q');
					stopWatch(watchW, 'w');
					stopWatch(watchE, 'e');
					stopWatch(watchR, 'r');
					stopWatch(watchT, 't');
				}

			});

			hotkeys('j', function(event, handler){

				if (watchParts.lineToggle.j == 0) {
					watchParts.lineToggle.j = 1;
					startWatch(watchY, 'y');
					startWatch(watchU, 'u');
					startWatch(watchI, 'i');
					startWatch(watchO, 'o');
					startWatch(watchP, 'p');
				} else {
					watchParts.lineToggle.j = 0;
					stopWatch(watchY, 'y');
					stopWatch(watchU, 'u');
					stopWatch(watchI, 'i');
					stopWatch(watchO, 'o');
					stopWatch(watchP, 'p');
				}

			});
		
			hotkeys('k', function(event, handler){

				if (watchParts.lineToggle.k == 0) {
					watchParts.lineToggle.k = 1;
					startWatch(watchA, 'a');
					startWatch(watchS, 's');
					startWatch(watchD, 'd');
					startWatch(watchF, 'f');
					startWatch(watchG, 'g');
				} else {
					watchParts.lineToggle.k = 0;
					stopWatch(watchA, 'a');
					stopWatch(watchS, 's');
					stopWatch(watchD, 'd');
					stopWatch(watchF, 'f');
					stopWatch(watchG, 'g');
				}

			});

			hotkeys('l', function(event, handler){

				if (watchParts.lineToggle.l == 0) {
					watchParts.lineToggle.l = 1;
					startWatch(watchZ, 'z');
					startWatch(watchX, 'x');
					startWatch(watchC, 'c');
					startWatch(watchV, 'v');
					startWatch(watchB, 'b');
				} else {
					watchParts.lineToggle.l = 0;
					stopWatch(watchZ, 'z');
					stopWatch(watchX, 'x');
					stopWatch(watchC, 'c');
					stopWatch(watchV, 'v');
					stopWatch(watchB, 'b');
				}

			});

			function assignHotkey(watch, hotkey) {

				hotkeys(hotkey, function(event, handler){

					if(watchParts.watchToggle[hotkey] == 0) {
						startWatch(window[watch], hotkey)
					} else {
						stopWatch(window[watch], hotkey)
					}

				});
		
			}


			function createWatch(watch, hotkey) {
				window[watch] = new Stopwatch(	function(watch) {
					document.getElementById('wd-' + hotkey).innerHTML = watch.toString() + "." + parseInt(watch.getElapsed().milliseconds/100);
				}, 50);
			}

			// Line h
			createWatch('watchQ', 'q');
			assignHotkey('watchQ', 'q');

			createWatch('watchW', 'w');
			assignHotkey('watchW', 'w');

			createWatch('watchE', 'e');
			assignHotkey('watchE', 'e');

			createWatch('watchR', 'r');
			assignHotkey('watchR', 'r');

			createWatch('watchT', 't');
			assignHotkey('watchT', 't');


			// Line j
			createWatch('watchY', 'y');
			assignHotkey('watchY', 'y');

			createWatch('watchU', 'u');
			assignHotkey('watchU', 'u');

			createWatch('watchI', 'i');
			assignHotkey('watchI', 'i');

			createWatch('watchO', 'o');
			assignHotkey('watchO', 'o');

			createWatch('watchP', 'p');
			assignHotkey('watchP', 'p');


			// Line k
			createWatch('watchA', 'a');
			assignHotkey('watchA', 'a');

			createWatch('watchS', 's');
			assignHotkey('watchS', 's');

			createWatch('watchD', 'd');
			assignHotkey('watchD', 'd');

			createWatch('watchF', 'f');
			assignHotkey('watchF', 'f');

			createWatch('watchG', 'g');
			assignHotkey('watchG', 'g');


			// Line l
			createWatch('watchZ', 'z');
			assignHotkey('watchZ', 'z');

			createWatch('watchX', 'x');
			assignHotkey('watchX', 'x');

			createWatch('watchC', 'c');
			assignHotkey('watchC', 'c');

			createWatch('watchV', 'v');
			assignHotkey('watchV', 'v');

			createWatch('watchB', 'b');
			assignHotkey('watchB', 'b');

			function globalBreak(watch, hotkey, toggle, globalToggle, counter) {

				if (window[toggle] == 1) {
					event.preventDefault();
					window[watch].stop();
					window[toggle] = 0;
					window[globalToggle] = 1;
					// window[counter] += 1;
					// document.getElementById('c-' + hotkey).innerHTML = window[counter];
					document.getElementById('blink-' + hotkey).classList.remove("blink");
				} else if (window[globalToggle] == 1) {
					event.preventDefault();
					window[watch].start();
					window[toggle] = 1;
					window[globalToggle] = 0;
					document.getElementById('blink-' + hotkey).classList.add("blink");
				}
			}

			let globalBreakToggle = 0;
			
			hotkeys('m', function(event, handler) {
				if(globalBreakToggle == 0) {
					globalBreakToggle = 1;
					document.getElementById('break-button').classList.add("break");
				} else {
					globalBreakToggle = 0;
					document.getElementById('break-button').classList.remove("break");
				}

				globalBreak('watchQ', 'q', 'toggleQ', 'globalToggleQ', 'countQ');
				globalBreak('watchW', 'w', 'toggleW', 'globalToggleW', 'countW');
				globalBreak('watchE', 'e', 'toggleE', 'globalToggleE', 'countE');
				globalBreak('watchR', 'r', 'toggleR', 'globalToggleR', 'countR');
				globalBreak('watchT', 't', 'toggleT', 'globalToggleT', 'countT');

				globalBreak('watchY', 'y', 'toggleY', 'globalToggleY', 'countY');
				globalBreak('watchU', 'u', 'toggleU', 'globalToggleU', 'countU');
				globalBreak('watchI', 'i', 'toggleI', 'globalToggleI', 'countI');
				globalBreak('watchO', 'o', 'toggleO', 'globalToggleO', 'countO');
				globalBreak('watchP', 'p', 'toggleP', 'globalToggleP', 'countP');

				globalBreak('watchA', 'a', 'toggleA', 'globalToggleA', 'countA');
				globalBreak('watchS', 's', 'toggleS', 'globalToggleS', 'countS');
				globalBreak('watchD', 'd', 'toggleD', 'globalToggleD', 'countD');
				globalBreak('watchF', 'f', 'toggleF', 'globalToggleF', 'countF');
				globalBreak('watchG', 'g', 'toggleG', 'globalToggleG', 'countG');

				globalBreak('watchZ', 'z', 'toggleZ', 'globalToggleZ', 'countZ');
				globalBreak('watchX', 'x', 'toggleX', 'globalToggleX', 'countX');
				globalBreak('watchC', 'c', 'toggleC', 'globalToggleC', 'countC');
				globalBreak('watchV', 'v', 'toggleV', 'globalToggleV', 'countV');
				globalBreak('watchB', 'b', 'toggleB', 'globalToggleB', 'countB');

			});

			// ]]&gt;
		</script>

</body> 
</html> 
